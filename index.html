<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self' https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline'; img-src 'self' data: https://commons.wikimedia.org https://upload.wikimedia.org; connect-src 'self' https://en.wikipedia.org; object-src 'none'; base-uri 'self'; frame-ancestors 'none'; form-action 'none'"
    />
    <meta name="referrer" content="strict-origin-when-cross-origin" />
    <title>World Outline Map</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <header class="top-link-banner">Neri's alphabetical map game</header>

    <main class="app-shell">
      <section class="map-stage">
        <svg id="world-map" aria-label="World country outline map" role="img"></svg>
        <div class="map-zoom-controls" aria-label="Map zoom controls">
          <button id="zoom-in-btn" class="map-zoom-btn" type="button" aria-label="Zoom in">+</button>
          <button id="zoom-out-btn" class="map-zoom-btn" type="button" aria-label="Zoom out">−</button>
          <button id="zoom-reset-btn" class="map-zoom-btn map-zoom-reset-btn" type="button" aria-label="Reset zoom">Reset</button>
          <p id="zoom-readout" class="map-zoom-readout" aria-live="polite">100%</p>
        </div>
        <aside id="country-popup" class="country-popup" hidden aria-hidden="true">
          <button id="country-popup-close" class="country-popup-close" type="button" aria-label="Close country details">×</button>
          <div class="country-popup-header">
            <h3 id="country-popup-name" class="country-popup-name">Country</h3>
          </div>
          <img id="country-popup-leader-image" class="country-popup-leader-image" alt="" hidden />
          <p id="country-popup-population" class="country-popup-population">Population: N/A</p>
          <p id="country-popup-leader" class="country-popup-leader">Leader: N/A</p>
        </aside>
        <aside id="city-popup" class="country-popup city-popup" hidden aria-hidden="true">
          <button id="city-popup-close" class="country-popup-close" type="button" aria-label="Close city details">×</button>
          <div class="country-popup-header">
            <h3 id="city-popup-name" class="country-popup-name">City</h3>
          </div>
          <img id="city-popup-image" class="country-popup-leader-image city-popup-image" alt="" hidden />
          <p id="city-popup-population" class="country-popup-population">City population: N/A</p>
          <p id="city-popup-summary" class="city-popup-summary">No city summary available.</p>
        </aside>
      </section>
      <aside class="side-panel" aria-live="polite">
        <section class="game-panel" aria-label="Alphabet game mode">
          <div class="game-panel-head">
            <h2 class="game-panel-title">Alphabet Game</h2>
            <span class="game-panel-state" data-role="game-status">Idle</span>
          </div>
          <p class="game-panel-task" data-role="game-task">Press Start to begin a timed round.</p>
          <div class="game-stats">
            <p class="game-stat"><span class="game-stat-label">Time</span><strong data-role="game-time">120s</strong></p>
            <p class="game-stat"><span class="game-stat-label">Score</span><strong data-role="game-score">0</strong></p>
            <p class="game-stat"><span class="game-stat-label">Best</span><strong data-role="game-best-score">0</strong></p>
          </div>
          <p class="game-panel-message" data-role="game-message">Find countries by clicking on the map.</p>
          <div class="game-actions">
            <button class="game-btn game-btn-start" type="button" data-action="game-start">Start</button>
            <button class="game-btn game-btn-stop" type="button" data-action="game-stop" disabled>Stop</button>
          </div>
        </section>
        <h2 class="side-panel-title">Highlighted Countries</h2>
        <p class="side-panel-subtitle">Press letters to add groups. Press Space to reset.</p>
        <ul id="highlighted-country-list" class="country-list" data-role="highlighted-country-list">
          <li class="country-list-empty">No countries highlighted.</li>
        </ul>
      </aside>
    </main>

    <footer class="instructions-banner" aria-label="Keyboard instructions">
      <p>Press A-Z to highlight countries starting with that letter. Push spacebar to reset.</p>
      <p class="instructions-hebrew" lang="he" dir="rtl">לחצו על A-Z כדי להדגיש מדינות שמתחילות באות הזאת. לחצו על מקש הרווח כדי לאפס.</p>
    </footer>

    <section id="mobile-bottom-sheet" class="mobile-bottom-sheet" aria-live="polite" aria-expanded="false">
      <button id="mobile-bottom-sheet-toggle" class="mobile-bottom-sheet-toggle" type="button" aria-expanded="false">
        Highlighted Countries
      </button>
      <div class="mobile-bottom-sheet-content">
        <section class="game-panel game-panel-mobile" aria-label="Alphabet game mode">
          <div class="game-panel-head">
            <h2 class="game-panel-title">Alphabet Game</h2>
            <span class="game-panel-state" data-role="game-status">Idle</span>
          </div>
          <p class="game-panel-task" data-role="game-task">Tap Start to begin a timed round.</p>
          <div class="game-stats">
            <p class="game-stat"><span class="game-stat-label">Time</span><strong data-role="game-time">120s</strong></p>
            <p class="game-stat"><span class="game-stat-label">Score</span><strong data-role="game-score">0</strong></p>
            <p class="game-stat"><span class="game-stat-label">Best</span><strong data-role="game-best-score">0</strong></p>
          </div>
          <p class="game-panel-message" data-role="game-message">Find countries by tapping on the map.</p>
          <div class="game-actions">
            <button class="game-btn game-btn-start" type="button" data-action="game-start">Start</button>
            <button class="game-btn game-btn-stop" type="button" data-action="game-stop" disabled>Stop</button>
          </div>
        </section>
        <ul id="mobile-highlighted-country-list" class="country-list" data-role="highlighted-country-list">
          <li class="country-list-empty">No countries highlighted.</li>
        </ul>
      </div>
    </section>

    <nav id="mobile-letter-tray" class="mobile-letter-tray" aria-label="Mobile letter controls">
      <button id="mobile-clear-btn" class="mobile-tray-button mobile-clear-btn" type="button">Clear</button>
      <button id="mobile-list-toggle" class="mobile-tray-button" type="button" aria-expanded="false">List</button>
      <div id="mobile-letter-buttons" class="mobile-letter-buttons"></div>
    </nav>

    <script type="module" src="./src/app.js"></script>
  </body>
</html>
